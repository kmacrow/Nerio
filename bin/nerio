#!/usr/bin/env node


var argv    = require('optimist').argv;
var fs      = require('fs');
var esprima = require('esprima');
var escodegen = require('escodegen');
var esmangle  = require('esmangle');

var code = '';

// read some code on stdin, parse it, and dump the ast

process.stdin.resume();
process.stdin.setEncoding('utf-8');

process.stdin.on('data', function(buf) { code += buf; });

process.stdin.on('end', function() {

    // initial AST (abstract syntax tree)
    var ast = esprima.parse(code),

    // compressed/simplified AST
    compressed = esmangle.optimize(ast, null);

    // print the compress/simplified code
    console.log('');
    console.log(escodegen.generate(result)); 
    console.log('');
});
